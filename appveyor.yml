os: Visual Studio 2015

environment:
  matrix:
    - CLI_ALIAS: lkg
      CLI_VERSION: 1.0.0.001461
    - CLI_ALIAS: latest
      CLI_VERSION: Latest

install:
  - ps: .\scripts\show-dotnet-info.ps1
  # Download an install dotnet cli msi package
  - ps: Start-FileDownload "https://dotnetcli.blob.core.windows.net/dotnet/beta/Installers/$env:CLI_VERSION/dotnet-win-x64.$( $env:CLI_VERSION.ToLower() ).exe" -FileName "dotnet-win-x64.exe"
  - ps: Start-Process "dotnet-win-x64.exe" "-install -quiet" -Wait
  # set DOTNET_HOME env var and add dotnet bin to PATH
  - ps: $env:DOTNET_HOME = "$env:ProgramFiles\dotnet\bin"
  - ps: $env:Path = "$env:DOTNET_HOME;$env:Path"

build_script:
  - ps: .\scripts\show-dotnet-info.ps1
  # Run dotnet new 
  - ps: mkdir "test\test-dotnet-new" -Force | Push-Location
  - ps: dotnet new --lang f#
  - ps: dotnet restore
  - ps: dotnet build
  - ps: dotnet run a b
  - ps: Pop-Location
  # Run all tests 
  - ps: .\scripts\run-tests.ps1


test: off 
version: 0.0.1.{build}
